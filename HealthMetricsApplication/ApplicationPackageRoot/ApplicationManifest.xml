<?xml version="1.0" encoding="utf-8"?>
<ApplicationManifest xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" ApplicationTypeName="HealthMetrics" ApplicationTypeVersion="1.0.0.0" xmlns="http://schemas.microsoft.com/2011/01/fabric">
  <Parameters>
    <Parameter Name="ScoreCalculationMode" DefaultValue="Mode1" />
    <Parameter Name="CreationServiceParallelThreads" DefaultValue="8" />
    <Parameter Name="MaxBandsToCreatePerServiceInstance" DefaultValue="4000" />
    <Parameter Name="BandActorServiceName" DefaultValue="HealthMetrics.BandActorService" />
    <Parameter Name="DoctorServiceInstanceName" DefaultValue="HealthMetrics.DoctorService" />
    <Parameter Name="CountyServiceInstanceName" DefaultValue="HealthMetrics.CountyService" />
    <Parameter Name="NationalServiceInstanceName" DefaultValue="HealthMetrics.NationalService" />
    <Parameter Name="BandActorService_PartitionCount" DefaultValue="10" />
    <Parameter Name="BandActorService_MinReplicaSetSize" DefaultValue="1" />
    <Parameter Name="BandActorService_TargetReplicaSetSize" DefaultValue="1" />
  </Parameters>
  <ServiceManifestImport>
    <ServiceManifestRef ServiceManifestName="HealthMetrics.BandCreationServicePkg" ServiceManifestVersion="1.0.0.0" />
    <ConfigOverrides>
      <ConfigOverride Name="Config">
        <Settings>
          <Section Name="HealthMetrics.BandCreationService.Settings">
            <Parameter Name="NumberOfCreationThreads" Value="[CreationServiceParallelThreads]" />
            <Parameter Name="MaxBandsToCreatePerServiceInstance" Value="[MaxBandsToCreatePerServiceInstance]" />
            <Parameter Name="BandActorServiceName" Value="[BandActorServiceName]" />
            <Parameter Name="DoctorServiceInstanceName" Value="[DoctorServiceInstanceName]" />
          </Section>
        </Settings>
      </ConfigOverride>
    </ConfigOverrides>
  </ServiceManifestImport>
  <ServiceManifestImport>
    <ServiceManifestRef ServiceManifestName="HealthMetrics.BandActorPkg" ServiceManifestVersion="1.0.0" />
    <ConfigOverrides>
      <ConfigOverride Name="Config">
        <Settings>
          <Section Name="HealthIndexCalculator.Settings">
            <Parameter Name="ScoreCalculationMode" Value="[ScoreCalculationMode]" />
          </Section>
          <Section Name="HealthMetrics.BandActor.Settings">
            <Parameter Name="DoctorServiceInstanceName" Value="[DoctorServiceInstanceName]" />
          </Section>
        </Settings>
      </ConfigOverride>
    </ConfigOverrides>
  </ServiceManifestImport>
  <ServiceManifestImport>
    <ServiceManifestRef ServiceManifestName="HealthMetrics.DoctorServicePkg" ServiceManifestVersion="1.0.0" />
    <ConfigOverrides>
      <ConfigOverride Name="Config">
        <Settings>
          <Section Name="HealthIndexCalculator.Settings">
            <Parameter Name="ScoreCalculationMode" Value="[ScoreCalculationMode]" />
          </Section>
          <Section Name="HealthMetrics.DoctorService.Settings">
            <Parameter Name="CountyServiceInstanceName" Value="[CountyServiceInstanceName]" />
          </Section>
        </Settings>
      </ConfigOverride>
    </ConfigOverrides>
  </ServiceManifestImport>
  <ServiceManifestImport>
    <ServiceManifestRef ServiceManifestName="HealthMetrics.CountyServicePkg" ServiceManifestVersion="1.0.0.0" />
    <ConfigOverrides>
      <ConfigOverride Name="Config">
        <Settings>
          <Section Name="HealthIndexCalculator.Settings">
            <Parameter Name="ScoreCalculationMode" Value="[ScoreCalculationMode]" />
          </Section>
          <Section Name="HealthMetrics.CountyService.Settings">
            <Parameter Name="NationalServiceInstanceName" Value="[NationalServiceInstanceName]" />
          </Section>
        </Settings>
      </ConfigOverride>
    </ConfigOverrides>
  </ServiceManifestImport>
  <ServiceManifestImport>
    <ServiceManifestRef ServiceManifestName="HealthMetrics.NationalServicePkg" ServiceManifestVersion="1.0.0.0" />
  </ServiceManifestImport>
  <ServiceManifestImport>
    <ServiceManifestRef ServiceManifestName="HealthMetrics.WebServicePkg" ServiceManifestVersion="1.0.0.0" />
    <ConfigOverrides>
      <ConfigOverride Name="Config">
        <Settings>
          <Section Name="HealthMetrics.WebService.Settings">
            <Parameter Name="BandActorServiceName" Value="[BandActorServiceName]" />
            <Parameter Name="CountyServiceInstanceName" Value="[CountyServiceInstanceName]" />
            <Parameter Name="NationalServiceInstanceName" Value="[NationalServiceInstanceName]" />
          </Section>
        </Settings>
      </ConfigOverride>
    </ConfigOverrides>
  </ServiceManifestImport>
  <DefaultServices>
    <Service Name="BandActorService" GeneratedIdRef="2f6a582a-857e-400d-941c-da6fda3ece8d|None">
      <StatefulService ServiceTypeName="BandActorServiceType" TargetReplicaSetSize="[BandActorService_TargetReplicaSetSize]" MinReplicaSetSize="[BandActorService_MinReplicaSetSize]">
        <UniformInt64Partition PartitionCount="[BandActorService_PartitionCount]" LowKey="-9223372036854775808" HighKey="9223372036854775807" />
      </StatefulService>
    </Service>
  </DefaultServices>
</ApplicationManifest>